library(usmap)
usmap::plot_usmap("states", labels = TRUE)
usmap::plot_usmap(regions=c("Alaska"))
usmap::plot_usmap(regions=c("state"))
usmap::plot_usmap(regions=c("Alaska"))
usmap::plot_usmap(regions=c("states")) %>%
filter("Alaska")
sites <- data.frame(lon = c(-156.6189, -149.3701, -147.5042, -149.2143), lat = c(71.28235, 68.66041, 65.15379, 63.87526))
transformed_data <- usmap_transform(sites)
plot_usmap(color = "black") +
geom_point(data = transformed_data,
aes(x = lon.1, y = lat.1),
color = "pink",
size = 2.5)
sites <- data.frame(lon = c(-156.6189, -149.3701, -147.5042, -149.2143), lat = c(71.28235, 68.66041, 65.15379, 63.87526))
transformed_data <- usmap_transform(sites)
plot_usmap(color = "black") +
geom_point(data = transformed_data,
aes(x = lon.1, y = lat.1),
color = "pink",
size = 2.5)
library(usmap)
#title: "AK-Map"
#author: "Anna Talucci"
#date: "1/22/2020"
#output: html_document
---
library(leaflet)
install.packages("leaflet")
install.packages("DT")
#title: "AK-Map"
#author: "Anna Talucci"
#date: "1/22/2020"
#output: html_document
---
library(leaflet)
library(dplyr)
library(tidyr)
library(ggplot2)
library(DT)
library(sp)
library(sf)
library(ggmap) # devtools::install_github("dkahle/ggmap")
library(ggrepel)
library(RStoolbox)
install.packages("RStoolbox")
library(RStoolbox)
library(raster)
library(rgdal)
library(RColorBrewer)
library(cowplot)
library(ggspatial)
library(maps)
# Trying to create bound box but it depends on projection
- UL -159.2085, 71.3877
- UR -153.6549, 71.3877
- LR -153.6549, 70.3104
- LL -159.2085, 70.3104
```{r eval=FALSE, include=FALSE}
(insetrect <- data.frame(xmin = -153.6549, xmax = -159.2085,
ymin = 70.3104, ymax = 71.3877))
```
```{r eval=FALSE, include=FALSE}
proj_ak_shape = "+proj=longlat +datum=NAD83 +no_defs"
```
```{r eval=FALSE, include=FALSE}
proj4string(insetrect) <-CRS("+proj=longlat +datum=NAD83 +no_defs")
```
Utqiavik, AK (AKA Barrow, AK)
```{r eval=FALSE, include=FALSE}
labs <- tibble(
long = c(-156.7886),
lat = c(71.2906),
names = ("Utqiagvik"))
```
## As SF object (Plays nice with ggplot)
```{r}
ak_sf <- st_read(
"../data/AK-state/GU_StateOrTerritory.shp")
```
```{r}
st_crs(ak_sf)
```
```{r}
ak_ee = st_transform(ak_sf, CRS( "+proj=laea +lat_0=90 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"))
```
```{r}
ak_sf_eeak = st_transform(ak_sf, CRS( "+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs"))
```
```{r}
ak_sp = readOGR("../data/AK-state/GU_StateOrTerritory.shp", "GU_StateOrTerritory")
```
```{r}
plot(ak_sp)
```
### Tasnforming rpojection for SP
```{r}
ak_sp_ee = spTransform(ak_sp, CRS( "+proj=laea +lat_0=90 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"))
```
+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs
```{r}
ak_sp_3338 = spTransform(ak_sp, CRS( "+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"))
```
+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs
+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs
```{r}
ak_sp_eeak = spTransform(ak_sp, CRS( "+proj=aea +lat_1=55 +lat_2=65 +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs"))
```
```{r}
ak_sp_wgs84 = spTransform(ak_sp, CRS("+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"))
plot(ak_sp_wgs84)
```
```{r}
plot(ak_sp_ee)
```
EPSG 3338 NAD83 / Alaska Albers
```{r}
plot(ak_sp_3338)
```
Alaska Albers Equal Area Conic
```{r}
plot(ak_sp_eeak)
UL -159.2085, 71.3877
UR -153.6549, 71.3877
LR -153.6549, 70.3104
LL -159.2085, 70.3104
(insetrect <- data.frame(xmin = -153.6549, xmax = -159.2085,
ymin = 70.3104, ymax = 71.3877))
proj_ak_shape = "+proj=longlat +datum=NAD83 +no_defs"
proj4string(insetrect) <-CRS("+proj=longlat +datum=NAD83 +no_defs")
proj4string(insetrect) <-CRS("+proj=longlat +datum=NAD83 +no_defs")
Utqiavik, AK (AKA Barrow, AK)
labs <- tibble(
long = c(-156.7886),
lat = c(71.2906),
names = ("Utqiagvik"))
```
probe_loc = read.csv("processed/site_locations.csv")
library(tidyverse)
library(urbnmapr)
library(usmap)
library(ggplot2)
library(tidyverse)
knitr::opts_chunk$set(dpi = 300,
echo=FALSE,message=FALSE,warning=FALSE,
collapse = TRUE,
comment = "#>"
)
library(ggplot2)
library(usmap)
sites <- data.frame(lon = c(-156.6189, -149.3701, -147.5042, -149.2143), lat = c(71.28235, 68.66041, 65.15379, 63.87526))
transformed_data <- usmap_transform(sites)
plot_usmap(color = "black") +
geom_point(data = transformed_data,
aes(x = lon.1, y = lat.1),
color = "pink",
size = 2.5)
library(dplyr)
library(ggplot2)
library(ggforce)
library(ggrepel)
library(ggmap)
library(usmap)
#FTC Quantification dataset
FTC_dat = readRDS("final_dat_8-28.RData")
load("~/R/R/R Datasets/FTC_transect/processed/final_dat_8-28.RData")
#FTC Quantification dataset
FTC_dat = readRDS("final_dat.RData")
#SOMMOS site-level data (latitude and longitude)
site_dat = read.csv("SOMMOS_Site_11-25-19.csv")
library(dplyr)
library(ggplot2)
library(ggforce)
library(ggrepel)
library(ggmap)
library(usmap)
#FTC Quantification dataset
FTC_dat = readRDS("final_dat.RData")
library(readr)
SOMMOS_Site_11_25_19 <- read_csv("processed/SOMMOS_Site_11-25-19.csv")
View(SOMMOS_Site_11_25_19)
load("~/R/R/R Datasets/FTC_transect/processed/final_dat.RData")
#FTC Quantification dataset
FTC_dat = read.csv("final_dat.csv")
#FTC Quantification dataset
FTC_dat = readRDS("processed/final_dat.RData")
#SOMMOS site-level data (latitude and longitude)
site_dat = read.csv("processed/SOMMOS_Site_11-25-19.csv")
#Subset permafrost sites only
permafrost_sites = subset(site_dat, site == "HEAL" | site == "BARR" | site == "BONA" | site == "TOOL")
dim(permafrost_sites) #should by 4 x 262
#Merge with FTC_dat
FTC_site = FTC_dat %>% right_join(permafrost_sites, by=c("site"))
head(FTC_site)
#Relevant data
plot_dat = subset(FTC_site, mag.vec == 1.5)
plot_dat=FTC_site[,c("longitude.dec_deg","latitude.dec_deg","site","Def1","season","core","depth_pos","year")]
#Here can calculate what you want to average over (in this example, average over everything but site)
FTC_example = summarySE(plot_dat, measurevar = "Def1", groupvars = c("longitude.dec_deg", "latitude.dec_deg","site"), na.rm=TRUE)
library(dplyr)
library(ggplot2)
library(ggforce)
library(ggrepel)
library(ggmap)
library(usmap)
#Here can calculate what you want to average over (in this example, average over everything but site)
FTC_example = summarySE(plot_dat, measurevar = "Def1", groupvars = c("longitude.dec_deg", "latitude.dec_deg","site"), na.rm=TRUE)
library(Rmisc)
library(Rmisc)
library(dplyr)
library(ggplot2)
library(ggforce)
library(ggrepel)
library(ggmap)
library(usmap)
#Here can calculate what you want to average over (in this example, average over everything but site)
FTC_example = summarySE(plot_dat, measurevar = "Def1", groupvars = c("longitude.dec_deg", "latitude.dec_deg","site"), na.rm=TRUE)
colnames(FTC_example)=c("lon","lat","site","N","Def1","sd","se","ci")
plot_dat_transformed <- usmap_transform(FTC_example)
#This is giving a warning related to the projection, because checking the projection used in the function gives this warning:
usmap_crs()
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(soil_palette("gley"), direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
library(soilpalettes)
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(soil_palette("gley"), direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(soil_palette("gley", 4), direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(soil_palette("redox", 4), direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(soil_palette("alaquod", 4), direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="city", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="City", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_continuous(values = soil_palette("gley", 4), guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_continuous(values = soil_palette("redox", 4), guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_binned(values = soil_palette("redox", 4), guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="rainbow", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme_er(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
# ggplot set up-----------------------------------
theme_er <- function() {  # this for all the elements common across plots
theme_bw() %+replace%
theme(legend.position = "top",
legend.key=element_blank(),
legend.title = element_blank(),
legend.text = element_text(size = 12),
legend.key.size = unit(1.5, 'lines'),
panel.border = element_rect(color="black",size=2, fill = NA),
plot.title = element_text(hjust = 0.5, size = 14),
plot.subtitle = element_text(hjust = 0.5, size = 12, lineheight = 1.5),
axis.text = element_text(size = 12, color = "black"),
axis.title = element_text(size = 12, face = "bold", color = "black"),
# formatting for facets
panel.background = element_blank(),
strip.background = element_rect(colour="white", fill="white"), #facet formatting
panel.spacing.x = unit(1.5, "lines"), #facet spacing for x axis
panel.spacing.y = unit(1.5, "lines"), #facet spacing for x axis
strip.text.x = element_text(size=12, face="bold"), #facet labels
strip.text.y = element_text(size=12, face="bold", angle = 270) #facet labels
)
}
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme_er(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme_er(),
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
plot_usmap(include=c("AK")) +
geom_point(aes(x=lon.1, y=lat.1, fill=Def1), pch=21, data=plot_dat_transformed, size=3, color="black", show.legend=TRUE) +
geom_label_repel(aes(x=lon.1, y=lat.1, label=site), data=plot_dat_transformed, size=4.5, point.padding = 0.2) +
labs(fill="Freeze-thaw cycles (#)") +
scale_fill_viridis_c(option="plasma", direction=-1, guide = guide_colourbar(barwidth=10, barheight=1, direction = "horizontal", reverse = FALSE, title.position="top", ticks=FALSE, label=TRUE)) +
theme_er() +
theme(legend.position=c(0.1,-0.3),
plot.margin = unit(c(2,2,2,2), "cm"),
legend.title = element_text(size=12, color="black"),
legend.text = element_text(size=10, color="black"))
# load data---------------------------------
#ghg_csv = read.csv("processed/ghg_ftc.csv")
ghg_csv2 = read.csv("processed/ghg_depth.csv")
ftc_dat = read.csv("processed/FTC_quant_inprocess.csv")
ftc_fulldat = read.csv("processed/final_dat2.csv")
sommos_oc = read.csv("processed/oc_sommos_neonoc.csv")
probe_loc = read.csv("processed/Probe Locations.csv")
library(dplyr)
library(ggplot2)
library(maps)
require(maps)
require(viridis)
library(tidyr)
levels(as.factor(ftc_fulldat$site))
mutate(site = factor (site, levels = c("HEAL", "BONA", "BARR", "TOOL")))
levels(as.factor(ftc_fulldat$site))
levels(as.factor(ftc_fulldat$site)) +
mutate(site = factor (site, levels = c("HEAL", "BONA", "BARR", "TOOL")))
# load data---------------------------------
#ghg_csv = read.csv("processed/ghg_ftc.csv")
ghg_csv2 = read.csv("processed/ghg_depth.csv")
ftc_dat = read.csv("processed/FTC_quant_inprocess.csv")
ftc_fulldat = read.csv("processed/final_dat2.csv")
sommos_oc = read.csv("processed/oc_sommos_neonoc.csv")
probe_loc = read.csv("processed/Probe Locations.csv")
library(dplyr)
library(ggplot2)
library(maps)
require(maps)
require(viridis)
library(tidyr)
str(ghg_csv2)
str(ftc_dat)
str(ftc_fulldat)
str(sommos_oc)
str(probe_loc)
levels(as.factor(ghg_csv2$trmt))
levels(as.factor(ftc_fulldat$site))
mutate(site = factor (site, levels = c("HEAL", "BONA", "BARR", "TOOL")))
levels(as.factor(ftc_fulldat$site))
mutate(site = factor (site, levels = c("HEAL", "BONA", "BARR", "TOOL")))
ftc_fulldat = read.csv("processed/final_dat2.csv")
# ggplot set up-----------------------------------
theme_er <- function() {  # this for all the elements common across plots
theme_bw() %+replace%
theme(legend.position = "top",
legend.key=element_blank(),
legend.title = element_blank(),
legend.text = element_text(size = 12),
legend.key.size = unit(1.5, 'lines'),
panel.border = element_rect(color="black",size=2, fill = NA),
plot.title = element_text(hjust = 0.5, size = 14),
plot.subtitle = element_text(hjust = 0.5, size = 12, lineheight = 1.5),
axis.text = element_text(size = 12, color = "black"),
axis.title = element_text(size = 12, face = "bold", color = "black"),
# formatting for facets
panel.background = element_blank(),
strip.background = element_rect(colour="white", fill="white"), #facet formatting
panel.spacing.x = unit(1.5, "lines"), #facet spacing for x axis
panel.spacing.y = unit(1.5, "lines"), #facet spacing for x axis
strip.text.x = element_text(size=12, face="bold"), #facet labels
strip.text.y = element_text(size=12, face="bold", angle = 270) #facet labels
)
}
library(ggplot2)
library(soilpalettes)
library(soilDB)
library(aqp)
library(sharpshootR)
library(sp)
library(ggridges)
# bubble plot with depth on y axis---------------------------------
ftc_dat %>%
filter(duration==24 & mag.vec==1.5 & depth_cm<70) %>%
ggplot(aes(y = depth_cm, x = site, size = def1, color = def1))+
#geom_jitter()+
geom_point(position = position_jitter(width = 0.2))+
scale_y_reverse()+
# scale_size_continuous()+
scale_color_gradient(low = "blue", high = "red")+
ggtitle("Freeze Thaw Cycle Frequency") +
theme_er() +
facet_grid(~season)
ftc_dat %>%
filter(duration==24 & mag.vec==1.5) %>%
ggplot(aes(y = depth_cm, x = site, size = def1, color = def1))+
#geom_jitter()+
geom_point(position = position_jitter(width = 0.3))+
scale_y_reverse()+
# scale_size_continuous()+
scale_color_gradient(low = "blue", high = "red")+
theme_er() +
facet_grid(~season)
ftc_fulldat %>%
filter(duration==24 & mag.vec==1.5) %>%
ggplot(aes(y = depth_cm, x = site, size = Def1, color = Def1))+
#geom_jitter()+
geom_point(position = position_jitter(width = 0.2))+
scale_y_reverse()+
ggtitle("Freeze Thaw Gradient Across Seasons") +
scale_size_continuous(1) +
scale_color_gradient(low = "blue", high = "red")+
theme_er() +
facet_grid(~season)
